<div class="flex w-full flex-col-reverse md:flex-row justify-between flex-wrap gap-6">
    <div class="flex flex-col-reverse md:flex-col gap-6 mx-auto">
        <div class="flex justify-start sm:justify-center gap-8 flex-wrap">

            <div class="flex flex-col pl-5 justify-between bg-linear-to-br from-amber-500 to to-amber-600 rounded-2xl w-full lg:w-65  h-45 px-2 py-4 text-gray-100 font-semibold shadow-xl hover:shadow-white/50 transition-all duration-200">
                <div class="flex items-center gap-5">
                    <ng-icon name="faSolidFireFlameCurved" class="text-5xl"></ng-icon>
                    <h5 class="text-2xl">Daily calories</h5>
                </div>
                @if(!dashboardSource()?.dailyCalories) {
                    <div class="flex gap-4 items-center opacity-95">
                        <ng-icon name="faSolidGhost" class="text-xl"></ng-icon>
                        <p class="text-xl font-semibold overflow-hidden whitespace-nowra typewriter w-[14ch]">
                            No Data Yet...
                        </p>
                    </div>
                } @else {
                    <p class="text-xl font-semibold overflow-hidden whitespace-nowra  w-[12ch]">
                        {{dashboardSource()?.dailyCalories}}
                    </p>
                }

            </div>

            <div class="flex flex-col pl-5 justify-between bg-linear-to-br from-cyan-500/90 to to-cyan-600  shadow-xl  rounded-2xl w-full lg:w-65  h-45 px-2 py-4 text-gray-100 font-semibold hover:shadow-white/50 transition-all duration-200">
                <div class="flex items-center gap-5">
                    <ng-icon name="faSolidGlassWater" class="text-5xl"></ng-icon>
                    <h5 class="text-2xl">Water intake</h5>
                </div>
                @if(!dashboardSource()?.waterIntake) {
                    <div class="flex gap-4 items-center opacity-95">
                        <ng-icon name="faSolidGhost" class="text-xl"></ng-icon>
                        <p class="text-xl font-semibold overflow-hidden whitespace-nowra typewriter w-[14ch]">
                            No Data Yet...
                        </p>
                    </div>
                } @else {
                    <p class="text-xl font-semibold overflow-hidden whitespace-nowra  w-[12ch]">
                        {{dashboardSource()?.waterIntake}}
                    </p>
                }
            </div>

            <div class="flex flex-col pl-5 justify-between bg-linear-to-br from-teal-500/90 to to-teal-600 shadow-xl  rounded-2xl w-full lg:w-65  h-45 px-2 py-4 text-gray-100 font-semibold hover:shadow-white/50 transition-all duration-200">
                <div class="flex items-center gap-5">
                    <ng-icon name="faSolidMoon" class="text-5xl"></ng-icon>
                    <h5 class="text-2xl">Sleep</h5>
                </div>
                @if(!dashboardSource()?.averageSleep) {
                    <div class="flex gap-4 items-center opacity-95  ">
                        <ng-icon name="faSolidGhost" class="pr-2 text-xl"></ng-icon>
                        <p class="text-xl font-semibold overflow-hidden typewriter">
                            No Data Yet...
                        </p>
                    </div>
                } @else {
                    <p class="text-xl font-semibold overflow-hidden whitespace-nowra  w-[12ch]">
                        {{dashboardSource()?.averageSleep}}
                    </p>
                }
            </div>

            <div class="flex flex-col pl-5 justify-between bg-linear-to-br from-slate-500/90 to to-slate-600 shadow-xl rounded-2xl w-full lg:w-65  h-45 px-2 py-4 text-gray-100 font-semibold hover:shadow-white/50 transition-all duration-200">
                <div class="flex items-center gap-5">
                    <ng-icon name="faSolidDumbbell" class="text-5xl"></ng-icon>
                    <h5 class="text-2xl">Last workout</h5>
                </div>
                @if(!dashboardSource()?.lastWorkoutDate) {
                    <div class="flex gap-4 items-center opacity-95">
                        <ng-icon name="faSolidGhost" class="text-xl"></ng-icon>
                        <p
                        class="text-xl font-semibold overflow-hidden whitespace-nowra w-[12ch] typewriter">
                        No Data Yet...
                    </p>
                </div>
            } @else {
                <p

                class="text-xl font-semibold overflow-hidden whitespace-nowra  w-[12ch]">
                {{dashboardSource()?.lastWorkoutDate | date}}
            </p>
        }
    </div>

</div>

<div class="flex gap-4 flex-wrap">
    <div class="bg-slate-200 rounded-2xl shadow-xl transition-shadow duration-200 hover:shadow-2xl grow">
        <div class="flex justify-between bg-linear-to-br from-amber-500 to-amber-400 w-full rounded-t-2xl px-4 py-2 text-slate-800">
            <h1 class="font-bold text-xl">Workout chart</h1>
            @if(years()?.length! > 0) {
                <select
                (change)="loadCounts(selectedYear)"
                [(ngModel)]="selectedYear"
                class="px-2 py-1 bg-slate-100 rounded-md shadow-md text-slate-800 font-semibold">
                @for(year of years(); track $index) {
                    <option [ngValue]="year">{{year}}</option>
                }
            </select>
        }

    </div>

    <div class="flex flex-col min-h-70 gap-4">
        <div class="flex justify-between items-center max-w-[99%] sm:w-auto h-full flex-col grow gap-4 p-4 mx-auto">
            @if(years()?.length! > 0) {
                <app-workouts-chart [workoutCountsSource]="workoutsPerMonth" class="flex-1 min-w-full sm:min-w-85 max-w-[99%] mx-auto w-[26vw]"></app-workouts-chart>
            }
            @else {
                <div class="flex flex-col gap-3 justify-center items-center py-8 flex-1 w-full min-w-full sm:min-w-85 max-w-[99%] mx-auto">
                    <ng-icon name="faSolidChartLine" class="text-3xl sm:text-4xl opacity-50"></ng-icon>
                    <p class="text-xl sm:text-2xl text-slate-600 font-semibold text-center">Workout chart is not available</p>
                    <p class="text-lg sm:text-xl text-slate-600 font-semibold text-center">Start tracking your workouts to unlock the workout chart</p>

                </div>
            }
        </div>

    </div>
</div>
<div class="bg-slate-200 rounded-2xl shadow-xl transition-shadow duration-200 hover:shadow-2xl grow">
    <div class="flex justify-between bg-linear-to-br from-violet-500 to-violet-400 w-full rounded-t-2xl px-4 py-2">
        <h1 class="font-bold text-xl text-slate-200">Weight progress chart</h1>
    </div>

    <div class="flex flex-col gap-4 min-h-70">
        <div  class="flex items-center justify-center flex-col grow gap-4 p-4 ">
            @if(weightChartSource()?.entries!.length > 1) {
                <app-weight-chart [weightDataSource]="weightChartSource" class="flex-1 min-w-full sm:min-w-85 max-w-[99%] grow w-[26vw] mx-auto"></app-weight-chart>
            } @else {
                <div class="flex flex-col gap-3 justify-center items-center py-8 flex-1 min-w-full sm:min-w-85 max-w-[99%] mx-auto w-[26vw]">
                    <ng-icon name="faSolidChartLine" class="text-3xl sm:text-4xl opacity-50"></ng-icon>
                    <p class="text-xl sm:text-2xl text-slate-600 font-semibold text-center">Weight progress chart is not available</p>
                    <p class="text-lg sm:text-xl text-slate-600 font-semibold text-center">Log at least 2 weight entries to show progress chart</p>

                </div>
            }
        </div>

    </div>
</div>

</div>
<div class="bg-slate-200 rounded-2xl shadow-xl transition-all duration-200 hover:shadow-2xl grow flex flex-col ">
    <div class="flex flex-wrap bg-linear-to-br from-yellow-500 to-yellow-400 w-full rounded-t-2xl px-4 py-2">
        <h1 class="font-bold text-xl text-slate-800">Quick actions</h1>
    </div>

    <div class="p-4 bg-slate-200 space-y-3 rounded-b-2xl flex  h-full items-center justify-center">
        <div class="flex justify-center items-center flex-wrap md:flex-nowrap  gap-3 font-semibold text-slate-800  w-full">
            <a routerLink="/workout-form" class="text-left w-full bg-linear-to-br from-yellow-400 to-yellow-500 cursor-pointer rounded px-3 py-2 hover:opacity-50 transition-all duration-200 flex items-center gap-2 justify-center text-lg sm:text-xl active:opacity-40 shadow-all">
                <ng-icon name="faSolidDumbbell" class="self-center"></ng-icon>
                <span class="self-center">Add Workout</span>
            </a>
            <button class="text-left w-full bg-linear-to-br from-yellow-400 to-yellow-500 cursor-pointer rounded px-3 py-2 hover:opacity-50 transition-all duration-200 flex items-center gap-2 justify-center text-lg sm:text-xl active:opacity-40 shadow-all">
                <ng-icon name="faSolidScaleUnbalanced" class="self-center"></ng-icon>
                <a routerLink="/weight" class="self-center">Log weight</a>
            </button>
            <button class="text-left w-full bg-linear-to-br from-yellow-400 to-yellow-500 cursor-pointer rounded px-3 py-2 hover:opacity-50 transition-all duration-200 flex items-center gap-2 justify-center text-lg sm:text-xl active:opacity-40 shadow-all">
                <ng-icon name="faSolidUtensils" class="self-center"></ng-icon>
                <span class="self-center">Add Meal</span>
            </button>
            <button class="text-left w-full bg-linear-to-br from-yellow-400 to-yellow-500 cursor-pointer rounded px-3 py-2 hover:opacity-50 transition-all duration-200 flex items-center gap-2 justify-center text-lg sm:text-xl active:opacity-40 shadow-all">
                <ng-icon name="faSolidCalculator" class="self-center"></ng-icon>
                <span class="self-center">Calorie Calculator</span>
            </button>
        </div>
    </div>
</div>
</div>

<div class="flex flex-col gap-5 justify-between  rounded-2xl  grow">
    <div class="flex flex-col  w-full gap-4">
        <div class="bg-slate-200 rounded-2xl shadow-lg p-8 flex flex-col w-full grow items-center text-center hover:shadow-xl transition-all duration-200">
            <img
            routerLink="/profile"
            src="{{getProfileImageSrc()}}"
            [class.active:shadow-blue-600]="userSource()?.gender == 1"
            [class.hover:shadow-blue-300]="userSource()?.gender == 1"
            [class.active:shadow-rose-600]="userSource()?.gender == 2"
            [class.hover:shadow-rose-300]="userSource()?.gender == 2"
            class="rounded-full w-25 h-25 shadow-lg bg-slate-600 flex items-center justify-center text-white text-2xl font-semibold hover:opacity-70 active:opacity-50 transition duration-200 cursor-pointer">
            <h4 class="mt-4 text-lg font-semibold text-slate-800">{{this.userSource()?.fullName }}</h4>
            <div class="mt-3 w-full grid grid-cols-3 gap-4 text-center">
                <div>
                    <div class="text-sm text-slate-500">Weight</div>
                    <div class="font-semibold text-slate-800">{{getUserWeight()}}</div>
                </div>
                <div>
                    <div class="text-sm text-slate-500">Height</div>
                    <div class="font-semibold text-slate-800">{{getUserHeight()}}</div>
                </div>
                <div>
                    <div class="text-sm text-slate-500">Age</div>
                    <div class="font-semibold text-slate-800">{{getUserAge()}}</div>
                </div>
            </div>
        </div>

        <div class="bg-slate-200 rounded-2xl shadow-xl transition-all duration-200 hover:shadow-2xl">
            <div class="flex bg-linear-to-br from-yellow-500 to-yellow-400 w-full rounded-t-2xl px-4 py-2">
                <h1 class="font-bold text-xl text-slate-800">Last 10 workouts</h1>
            </div>


            <div class="max-h-90 overflow-y-auto">
                <div class="p-4 flex flex-col gap-4">
                    @if(dashboardSource()?.recentWorkouts?.length === 0 || !dashboardSource()?.recentWorkouts) {
                        <div class="flex flex-col gap-2 justify-center items-center py-15">
                            <ng-icon name="faSolidDumbbell" class="text-6xl text-slate-800!"></ng-icon>
                            <h1 class="text-3xl text-slate-800 font-semibold text-center">No workouts found</h1>
                            <a routerLink="/workout-form" class="text-xl text-slate-700 font-semibold hover:text-slate-900 hover:opacity-80 hover:underline">Add your first workout</a>
                        </div>
                    }
                    @else {
                        @for(workout of dashboardSource()?.recentWorkouts; track $index) {
                            <div
                            (click)="getToWorkout(workout.id)"
                            class="bg-white rounded-xl p-4 text-slate-800 shadow-lg flex justify-between items-center transition hover:-translate-y-1 hover:bg-amber-200 cursor-pointer active:bg-amber-300">
                                <div>
                                    <div class="font-semibold text-lg">{{workout.name}}</div>
                                    <div class="text-emerald-700 font-semibold">{{workout.workoutDate | date}}</div>
                                </div>
                                <div class="text-amber-600 font-semibold">{{workout.exerciseCount}} exercises</div>
                            </div>

                        }
                    }



                </div>
            </div>

        </div>
    </div>

</div>

</div>
